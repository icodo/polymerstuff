<html><head><link rel="import" href="./bower_components/polymer/polymer.html"><link rel="import" href="./bower_components/app-route/app-location.html"><link rel="import" href="./bower_components/app-route/app-route.html"><link rel="import" href="./bower_components/iron-pages/iron-pages.html"><link rel="import" href="./bower_components/paper-dropdown-menu/paper-dropdown-menu.html"><link rel="import" href="./bower_components/paper-item/paper-item.html"><link rel="import" href="./bower_components/paper-listbox/paper-listbox.html"><link rel="import" href="./bower_components/iron-demo-helpers/demo-pages-shared-styles.html"></head><body>&lt;<dom-module id="bank-web-app"><template><app-location route="{{route}}"></app-location><app-route route="{{route}}" pattern="/:page" data="{{data}}" tail="{{subRoute}}"></app-route><app-route route="{{subRoute}}" pattern="/:message" data="{{subRouteData}}"></app-route><iron-pages id="login-page" selected="{{data.page}}" attr-for-selected="page-name" selected-attribute="activePage"><bank-login page-name="login"></bank-login></iron-pages><iron-pages id="menu-page" selected="{{data.page}}" attr-for-selected="page-name" selected-attribute="activePage"><bank-login page-name="menu"></bank-login></iron-pages></template><script>Polymer({is:'bank-web-app',properties:{text:String,token:String,data:Object,subRouteData:Object},observers:['_dataChanged(data)'],listeners:{"token-valid":'_handleValidToken',message:'_showMessage',routing:'_routing'},_handleInvalidToken:function(){alert('Caralho, you don\'t have a token.')},_handleValidToken:function(a){debugger;this.token=a.detail,this.token!=void 0&&this.fire('routing','menu')},_routing:function(a){debugger;this.set('route.path',a.detail)},_showMessage:function(a){a.detail.message?alert(a.detail.message):alert(a.detail)},_dataChanged:function(a){if(null!=a&&''!=a.page&&this.token!=void 0){console.log('route changed: '+a);var b;switch(a.page){case'login':b=this.resolveUrl('bank-login.html'),this.importHref(b,null,null,null);break;case'menu':this.data.page='menu',b=this.resolveUrl('bank-menu.html'),this.importHref(b,null,null,null),this.set('route.path','/menu');break;default:}}else b=this.resolveUrl('bank-login.html'),this.importHref(b,null,null,null),this.set('route.path','/login')}});</script></dom-module></body></html>