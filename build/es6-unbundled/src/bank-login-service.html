<html><head><link rel="import" href="../bower_components/polymer/polymer.html"><link rel="import" href="../bower_components/iron-ajax/iron-ajax.html"></head><body><dom-module id="bank-login-service"><template><iron-ajax id="loginRequest" handle-as="json" content-type="application/json" on-response="_handleResponse" on-error="_handleError"></iron-ajax></template><script>Polymer({is:'bank-login-service',properties:{user:String,password:String,baseUrl:{type:String,value:function(){return'https://banq.qafe.com/rest/v0'}}},_handleResponse:function(a){a.detail.__data.response.token&&this.fire('token-valid',a.detail.__data.response.token)},_handleError:function(a){debugger;this.fire('token-valid','asdasdasdasdasd'),a&&('403'==a.detail.request.__data.status?this.fire('message',a.detail.request.__data.response):'400'==a.detail.request.__data.status?this.fire('message','You have to fill this fields caralho.'):this.fire('token-invalid',a.response))},generateGetRequest:function(){var a={};a.emailaddress=this.user,a.password=this.password,this.$.loginRequest.method='POST',this.$.loginRequest.headers={},this.$.loginRequest.body=a,this.$.loginRequest.url=this.baseUrl+'/login',this.$.loginRequest.generateRequest()}});</script></dom-module></body></html>